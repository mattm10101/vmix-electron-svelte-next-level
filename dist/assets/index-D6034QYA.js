(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&u(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function u(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}})();window.addEventListener("DOMContentLoaded",()=>{const I={transitions:document.getElementById("transitionsPanel"),inputs:document.getElementById("inputsPanel"),log:document.getElementById("logPanel")},c={transitions:document.getElementById("toggleTransitions"),inputs:document.getElementById("toggleInputs"),log:document.getElementById("toggleLog")};for(let e in c){const t=c[e],n=I[e];!t||!n||(t.onclick=()=>{const l=n.classList.toggle("minimized");t.textContent=l?"↕":"—"})}let s={el:null,xOff:0,yOff:0};document.querySelectorAll(".panel-header").forEach(e=>{e.onmousedown=t=>{s.el=e.parentElement,s.xOff=t.clientX-s.el.offsetLeft,s.yOff=t.clientY-s.el.offsetTop,s.el.style.zIndex=1e3}}),document.onmousemove=e=>{if(!s.el)return;let t=e.clientX-s.xOff,n=e.clientY-s.yOff;const l=s.el.offsetWidth,g=s.el.offsetHeight;t=Math.max(0,Math.min(t,window.innerWidth-l-10)),n=Math.max(0,Math.min(n,window.innerHeight-g-10)),s.el.style.left=`${t}px`,s.el.style.top=`${n}px`},document.onmouseup=()=>{s.el&&(s.el.style.zIndex="",s.el=null)};const u=document.getElementById("logContainer");function o(e,t="info"){const n=new Date().toLocaleTimeString(),l=t==="sent"?"#14ffec":t==="received"?"#00d0ff":"#ff14ec",g=document.createElement("div");g.innerHTML=`<span style="color:#555">[${n}]</span> <span style="color:${l}">${e}</span>`,u.append(g),u.scrollTop=u.scrollHeight}function i(e){window.electronAPI.send(e),o(`SENT: ${e}`,"sent")}["fadeButton","cutButton","mergeButton","stinger1Button"].forEach(e=>{const t=document.getElementById(e);if(!t)return;const n={fadeButton:"FUNCTION Fade",cutButton:"FUNCTION Cut",mergeButton:"FUNCTION Merge",stinger1Button:"FUNCTION Stinger1"};t.onclick=()=>i(n[e])});const r=document.getElementById("inputPanelContent");let d=[];async function L(){r.innerHTML="",d=[];for(let e=1;e<=50;e++)try{const t=await window.electronAPI.getInputName(e),n=document.createElement("button");n.className="input-btn",n.onclick=()=>i(`FUNCTION PreviewInput Input=${e}`),n.innerHTML=`<span class="number">${e}</span><span class="name">${t}</span>`,r.append(n),d.push({btn:n,title:t})}catch{break}o(`Discovered ${d.length} inputs`,"info")}const w=document.getElementById("refreshInputs");w?w.onclick=L:console.warn("renderer.js: missing #refreshInputs button"),L();let f=!0,a=!0,m=!0;const p=document.getElementById("optToggleNumbers");p&&(p.onclick=()=>{f=!f,p.textContent=f?"Hide Numbers":"Show Numbers",r.classList.toggle("hide-numbers",!f)});const y=document.getElementById("optToggleL3");y&&(y.onclick=()=>{a=!a,y.textContent=a?"Hide L3’s":"Show L3’s",d.forEach(({btn:e,title:t})=>{t.startsWith("L3")&&(e.style.display=a?"":"none")})});const h=document.getElementById("optToggleLists");h&&(h.onclick=()=>{m=!m,h.textContent=m?"Hide Lists":"Show Lists",d.forEach(({btn:e,title:t})=>{/^LIST\s*-/i.test(t)&&(e.style.display=m?"":"none")})}),window.electronAPI.receive(e=>{if(o(`RECV: ${e}`,"received"),e.startsWith("TALLY OK")){const t=e.slice(9).trim();d.forEach(({btn:n},l)=>{n.classList.remove("program","preview"),t[l]==="1"&&n.classList.add("program"),t[l]==="2"&&n.classList.add("preview")})}})});
